<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Ajax Example 4</title>
	
<!--below is a script which allows IE 8 to understand HTML 5 elements.-->
<!--[if lt IE 9]>
	<script>
		var elementsArray = ['abbr', 'article', 'aside', 'audio', 'bdi', 'canvas', 'data', 'datalist', 'details', 'figcaption', 'figure', 'footer', 'header', 'main', 'mark', 'meter', 'nav', 'output', 'progress', 'section', 'summary', 'template', 'time', 'video'];
		var len = elementsArray.length;
		for(i = 0; i < len; i++){
			document.createElement(elementsArray[i]);
		}
	</script>
<![endif]-->
</head>
	<body>
	<p>Send JSON info and display the list of names</p>
	<p><input type="button" id="submitBtn" value="Send JSON Info via Ajax" /></p>
	<div id="response"></div>
	<script type="text/javascript" src="js/Ajax.js"></script>
	<script type="text/javascript">
	var btn = document.getElementById('submitBtn');
	var response = document.getElementById('response');
	btn.addEventListener("click",sendRequest,false);
	
	function sendRequest(){
		//created a json object
		var json = {"employees": [
				{ "firstName":"John" , "lastName":"Doe" },
				{ "firstName":"Anna" , "lastName":"Smith" },
				{ "firstName":"Peter" , "lastName":"Jones" }
			]
		}
		//stringified the json object before sending it
		var data = JSON.stringify(json);	
		Ajax.sendRequest('/ajax4',handleRequest,data);
	}
	
	function handleRequest(req){
		response.innerHTML = req.responseText;
	}
	</script>
	</body>
</html>

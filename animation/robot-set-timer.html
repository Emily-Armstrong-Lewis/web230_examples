<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Robot Example</title>
		<style type="text/css">
		#wrapper{margin: 0 auto; width: 200px;}
		#robot{width: 150px; height: 150px; background-image: url(images/robot_strip.gif); background-position: 0 0;}
		</style>
	</head>
	<body>
	<div id="wrapper">
		<input type="button" id="start" value="Start" />
		<input type="button" id="stop" value="Stop" /> 
		<div id="robot"></div>
	</div>
	<script type="text/javascript" src="../core/core-event-listeners.js"></script>
	<script type="text/javascript">
	Core.addEventListener(document.getElementById('start'),"click",startAnimation);
	Core.addEventListener(document.getElementById('stop'),"click",stopAnimation);
		
	//set some global variables
	var robot = document.getElementById('robot');
	var frameHeight = 150;
	var frames = 10;
	var offsetY = 0;
	var animation;
		
	//recursive function calls itself
	function startAnimation(){
		offsetY -= frameHeight;
		//if the offset is less than negative frameheight times frames
		//reset offset.
		if (offsetY <= (-frameHeight * frames)){
			offsetY = 0;
		}
		robot.style.backgroundPosition = "0 "+offsetY+"px";
		
		animation = setTimeout(function(){startAnimation()},50);
		document.getElementById('start').disabled = true;
	}
	
	function stopAnimation(){
		clearTimeout(animation);
		document.getElementById('start').disabled = false;
	}
	
	</script>
	</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Stop Watch Example</title>
		<style type="text/css">
		#wrapper{margin: 0 auto; width: 200px;}
		#timer{font: 200%/1.3 Verdana;}
		</style>
	</head>
	<body>
	<div id="wrapper">
		<input type="button" id="start" value="Start" />
		<input type="button" id="stop" value="Stop" /> 
		<input type="button" id="reset" value="Reset" />  
		<div id="timer">00:00</div>
	</div>
	<script type="text/javascript" src="../core/core-event-listeners.js"></script>
	<script type="text/javascript">
	Core.addEventListener(document.getElementById('start'),"click",startStopWatch);
	Core.addEventListener(document.getElementById('stop'),"click",stopStopWatch);
	Core.addEventListener(document.getElementById('reset'),"click",resetStopWatch);
	
	//set some global variables
	var timer = document.getElementById('timer');
	var time = "00:00";
	var count = 0;
	var stopWatch;
		
	//recursive function calls itself 
	function startStopWatch(){
		count++;
		//sets up the timer display
		if(count<10){time = "00:0"+count;}
		else if(count<60){time = "00:"+count;}
		else if (count<599){
			time = "0"+parseInt(count/60)+":";
			if (count%60 < 10){time += "0"+(count%60);}
			else{time += (count%60);}
		}
		else{stopStopWatch();}//stops stopwatch after so long
		timer.innerHTML = time;
		
		//This is a recursive function that calls upon itself every second.
		stopWatch = setTimeout(function(){startStopWatch()},1000);
		document.getElementById('start').disabled = true;
	}
	
	function stopStopWatch(){
		clearTimeout(stopWatch);
		document.getElementById('start').disabled = false;
	}
	
	function resetStopWatch(){
		clearTimeout(stopWatch);
		time = "00:00";
		count = 0;
		timer.innerHTML = time;
		document.getElementById('start').disabled = false;
	}
	
	</script>
	</body>
</html>

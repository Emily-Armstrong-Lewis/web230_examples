<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Accordion</title>
		<style type="text/css">
		body{font: normal 75%/1.3 Verdana;}
		/*set the overflow of the div to hidden*/
		div {overflow: hidden;background-color: white;}
		div ul{list-style-type: none;background-color: aqua;margin: 0;padding: 0;}
		div li{border-bottom: 1px solid white;padding: 0 0 0 8px;}
		.title{list-style-type: none;width: 100px; background-color: #ccc;margin-top: 1px;cursor: pointer;}
		</style>
	</head>
	<body>
	<ul>
	<li class="title">Title 1
		<div>
			<ul>
				<li>link 1</li>
				<li>link 2</li>
				<li>link 3</li>
			</ul>
		</div>
	</li>
	<li class="title">Title 2
		<div>
			<ul>
				<li>link 1</li>
				<li>link 2</li>
				<li>link 3</li>
				<li>link 4</li>
				<li>link 5</li>
				<li>link 6</li>
			</ul>
		</div>
	</li>
	<li class="title">Title 3
		<div>
			<ul>
				<li>link 1</li>
				<li>link 2</li>
				<li>link 3</li>
				<li>link 4</li>
				<li>link 5</li>
			</ul>
		</div>
	</li>
	</ul>
	<script type="text/javascript" src="../core/core-event-listeners.js"></script>
	<script type="text/javascript">
	//get all the li tags
	var li = document.getElementsByTagName('li');
	
	//set global variables
	var openCount = 0;
	var closeCount = 50;
	var div;
	var divHgt;
	
	//loop through all li's looking for all those with the class
	//of "title"
	for(var i=0;i<li.length;i++){
		if (li[i].getAttribute('class') === "title"){
			//add an attribute of "toggle" with the value of 0 to
			//each li with the id of "title"
			li[i].setAttribute('toggle',0);
			//add an attribute of "hgt" with the value of the child
			//div tag height. We need this to know how long to extend
			//the div height.  firstChild is the text of the li nextSibling is actually
			//the div.
			li[i].setAttribute('hgt',li[i].firstChild.nextSibling.offsetHeight);
			//set the height to 0 so the list disappears
			li[i].firstChild.nextSibling.style.height = 0;
			//add event listerner to li[i] tags.
			li[i].addEventListener('click',toggleList,false);
		}
	}
	function toggleList(){
		//this function checks to see if the div is closed
		//if so it fires
		if (this.getAttribute('toggle')==="0"){
			div = this.firstChild.nextSibling;
			//sets attribute to 1
			this.setAttribute('toggle',1);
			//assigns hgt value to divHgt this allows
			//us to store that value in a global variable
			divHgt = this.getAttribute('hgt');
			//reset openCount
			openCount=0;
			//call openList
			openList();
		}
		else{
			div = this.firstChild.nextSibling;
			this.setAttribute('toggle',0);
			divHgt = this.getAttribute('hgt');
			//reset closeCount
			closeCount = divHgt;
			closeList();
		}

	}
	
	
	//openList opens the div by increasing the height incrementally
	//this gives the illustion of the lists opening up
	function openList(){
		if (openCount < divHgt){
			div.style.height = openCount+"px";
			openCount++;
			setTimeout(function(){openList()},5);
		}	
	}
	//closeList closes the div tag by decreasing the height decrementally
	//this gives the illusion of the list closing up
	function closeList(){
		if (closeCount >= 0){
			div.style.height = closeCount+"px";
			closeCount--;
			setTimeout(function(){closeList()},5);
		}	
	}
	</script>
	</body>
</html>

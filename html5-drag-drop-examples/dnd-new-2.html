<!DOCTYPE html>
<html lang="en">
  <head>
	<title>HTML5 Drag and Drop events</title>
	<meta charset="utf-8" />
	<style>
  #draggable {width: 200px; height: 20px; text-align: center; background: white;}
  #container{border: 3px dashed blue; width: 250px; padding: 10px;}
 .dropzone {width: 200px; height: 20px; background: blueviolet; margin-bottom: 10px; padding: 10px;}
</style>
  </head>
  <body>
  <h1>HTML5 Drag and Drop events</h1>
<p>This example demonstrates some of the different HTML5 drag and drop events. <em>drag, dragend, dragover, dragleave, and drop</em>.  Notice what happens when the cursor (while dragging the element) goes outside of the container.  If you look have the console.log open you can see the mouseX and mouseY positions as the element is being dragged.</p>

<div id="container">
	<div class="dropzone">
	    <div id="draggable" draggable="true">
	        This div is draggable
	    </div>
	</div>
	<div class="dropzone"></div>
	<div class="dropzone"></div>
	<div class="dropzone"></div>
	</div>
<script>
  var dragged;

  var container = document.getElementById('container');


  document.getElementById('draggable').addEventListener('dragstart',function(e){
    e.dataTransfer.setData('text/plain',null);
    dragged = e.target;
    e.target.style.opacity = .5;
    e.target.style.backgroundColor = 'black';
    e.target.style.color = "white";
  },false);

  /* events fired on the draggable target */
  container.addEventListener("drag", function(e) {
      e.target.style.backgroundColor = 'green';
      console.log('Mouse X'+e.clientX+'  '+'Mouse Y'+e.clientY);
  }, false);

  container.addEventListener("dragend", function(e) {
      // reset the transparency
      e.target.style.opacity = "";
      e.target.style.backgroundColor = "yellow";
      e.target.style.color = "black";

  }, false);

  /* events fired on the drop targets */
  container.addEventListener("dragover", function(e) {
      // prevent default to allow drop
      //console.log(e.target.nodeName);
      if (e.target.className === "dropzone"){
        e.target.style.backgroundColor = 'green';
      }
      e.preventDefault();
  }, false);

  container.addEventListener("dragleave", function(e) {
      // reset background of potential drop target when the draggable element leaves it
      if ( e.target.className == "dropzone" ) {
          e.target.style.background = "red";
      }

  }, false);

  container.addEventListener("drop", function(e) {
      // prevent default action (open as link for some elements)
      e.preventDefault();
      // move dragged elem to the selected drop target
      if ( e.target.className == "dropzone" ) {
          //when dropped all the background colors return to normal
          var divs = document.getElementsByTagName('div');
          var len = divs.length;
          for (var i = 0; i < len; i++){
            divs[i].style.backgroundColor = "";
          }
          dragged.parentNode.removeChild(dragged);
          e.target.appendChild( dragged );
      }
    
  }, false);
</script>

  </body>
</html>
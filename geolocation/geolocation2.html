<!DOCTYPE html>
<html lang="en">
  <head>
	<title>Geo Location with Google Map</title>
	<meta charset="utf-8" />
	
  </head>
  <body>
	<div id="map"></div>
    <div id="output"></div>
	<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script>
	  var output = '';
	  
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
      }
      else{
        document.getElementById('output').innerHTML = 'HTML5 Geolocation not supported by this browser';
      }
      
		
		function successCallback(pos){	
            var myMap = document.getElementById('map');
            myMap.style.width = '640px';
            myMap.style.height = '480px';
            
            //get cordinates from google maps
            var myCoords = new google.maps.LatLng(pos.coords.latitude,pos.coords.longitude);
            
            //get map from google maps
            //notice the second argument is a set of object properties
            var map = new google.maps.Map(myMap, {zoom: 15, center: myCoords, myTypeId: google.maps.MapTypeId.ROADMAP});
            
            //get marker
            var marker = new google.maps.Marker({position: myCoords, map: map});
            
            //get circle to show accuracy
            var accuracyRadius = new google.maps.Circle({map: map, radius: pos.coords.accuracy, fillColor: '#00AA00'});
            
            //connect the circle's position to the marker's position
            accuracyRadius.bindTo('center',marker,'position');
		}
		
		function errorCallback(posErr) {
		switch(posErr.code){
			case 1 : output = '<p>Permission to use Geolocation was denied';break;
			case 2 : output = '<p>The position of the device could not be determined';break;
			case 3 : output = '<p>The Geolocation operation timed out';break;
		  }
		  output += '<br />Actual message from browser "'+posErr.message+'"</p>';
		  document.getElementById('output').innerHTML = output;
		}
	  
	  
    </script>
  </body>
</html>